---
import LanguageSelector from './LanguageSelector.astro';
import { getLangFromUrl, useTranslations } from '../utils/i18n';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<header class="fixed top-0 left-0 right-0 z-50 bg-dark/80 backdrop-blur-md border-b border-gray-800">
  <nav class="container-custom mx-auto px-4 py-4">
    <div class="flex justify-between items-center">
      <a href="/" class="flex items-center">
        <img src="/logo-png.png" alt="Pablo Alcalde - Front-end Developer Logo" class="h-12 w-12" width="48" height="48" />
      </a>
      
      <div class="hidden md:flex items-center space-x-6">
        <a href="/#inicio" class="nav-link">{t('nav.home')}</a>
        <a href="/#sobre-mi" class="nav-link">{t('nav.about')}</a>
        <a href="/#experiencia" class="nav-link">{t('nav.experience')}</a>
        <a href="/#habilidades" class="nav-link">{t('nav.skills')}</a>
        <a href="/#proyectos" class="nav-link">{t('nav.projects')}</a>
        <a href="/#blog" class="nav-link">{t('nav.blog')}</a>
        <a href="/#contacto" class="nav-link">{t('nav.contact')}</a>
        <LanguageSelector />
      </div>

      <!-- Mobile menu button -->
      <button id="mobile-menu-btn" class="md:hidden text-white">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>

    <!-- Mobile menu -->
    <div id="mobile-menu" class="hidden md:hidden mt-4 pb-4">
      <div class="flex flex-col space-y-4">
        <a href="/#inicio" class="nav-link">{t('nav.home')}</a>
        <a href="/#sobre-mi" class="nav-link">{t('nav.about')}</a>
        <a href="/#experiencia" class="nav-link">{t('nav.experience')}</a>
        <a href="/#habilidades" class="nav-link">{t('nav.skills')}</a>
        <a href="/#proyectos" class="nav-link">{t('nav.projects')}</a>
        <a href="/#blog" class="nav-link">{t('nav.blog')}</a>
        <a href="/#contacto" class="nav-link">{t('nav.contact')}</a>
        <div class="pt-4 border-t border-gray-700">
          <LanguageSelector />
        </div>
      </div>
    </div>
  </nav>
</header>

<style>
  .nav-link {
    @apply text-gray-300 hover:text-white transition-colors duration-300 relative;
  }

  .nav-link::after {
    content: '';
    @apply absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-primary to-secondary transition-all duration-300;
  }

  .nav-link:hover::after {
    @apply w-full;
  }
</style>

<script>
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');

  mobileMenuBtn?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
  });

  // Close mobile menu when clicking on a link
  const mobileLinks = mobileMenu?.querySelectorAll('a');
  mobileLinks?.forEach(link => {
    link.addEventListener('click', () => {
      mobileMenu?.classList.add('hidden');
    });
  });
</script>

